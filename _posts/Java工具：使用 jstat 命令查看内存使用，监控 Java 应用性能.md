---
tags:
  - publish
---


在 Java 开发和调优中，了解应用程序的内存使用情况、垃圾回收频率等信息至关重要。jstat 是 JDK 中提供的一个命令行工具，用于实时监控 Java 虚拟机的各项统计信息。本文将介绍 jstat 的基本使用方法以及常用选项和输出项的含义。

## jstat命令格式
```shell
jstat [options]  [interval] [count]
```

- `options`: 指定需要输出的格式和显示的特定统计信息。
- `vmid`: Java 虚拟机 ID。
- `interval`: 收集统计信息的间隔时间，单位为秒（s）。
- `count`: 收集统计信息的次数。

> 你的Java应用应该在运行中，你可以使用 jps 命令查看运行中的Java进程，查看虚拟机ID。


## jstat 常用选项
jstat 的选项主要分为三类，分别用于监控内存使用、类加载和垃圾回收情况：

- 内存使用相关：`gc`
- 类加载相关：`class`
- 垃圾回收相关：`gcutil`

### 内存使用相关的选项：-gc
该选项提供了内存使用和垃圾回收相关的信息。

示例：
```shell
jstat -gc 32988 1s 20
# 虚拟机ID 32988 采样间隔1s 采样数20
```

![image.png](https://note-1251668647.cos.ap-nanjing.myqcloud.com/20240507173536.png)

输出参数说明：
- `S0C`: 年轻代中第一个幸存区的容量（单位 kb）。
- `S1C`: 年轻代中第二个幸存区的容量（单位 kb）。
- `S0U`: 年轻代中第一个幸存区目前已使用空间（单位 kb）。
- `S1U`: 年轻代中第二个幸存区目前已使用空间（单位 kb）。
- `EC`: 年轻代中 Eden 区的容量（单位 kb）。
- `EU`: 年轻代中 Eden 区目前已使用空间（单位 kb）。
- `OC`: 老年代的容量（单位 kb）。
- `OU`: 老年代目前已使用空间（单位 kb）。
- `MC`: 元空间的容量（单位 kb）。
- `MU`: 元空间目前已使用空间（单位 kb）。
- `CCSC`: 压缩类空间大小。
- `CCSU`: 压缩类空间使用大小。
- `YGC`: 从应用程序启动到采样时年轻代中 GC 次数。
- `YGCT`: 从应用程序启动到采样时年轻代中 GC 所用时间（单位 s）。
- `FGC`: 从应用程序启动到采样时老年代（full GC）GC 次数。
- `FGCT`: 从应用程序启动到采样时老年代（full GC）GC 所用时间（单位 s）。
- `GCT`: 从应用程序启动到采样时 GC 总用时（单位 s）。

### 类加载相关的选项：-class
该选项提供的有关类的装入和卸载相关的信息。

示例：
```shell
jstat -class 32988 1s 10
# 虚拟机ID 32988 采样间隔1s 采样数10
```
![image.png](https://note-1251668647.cos.ap-nanjing.myqcloud.com/20240507173945.png)

输出参数说明：
- `Loaded`：已加载的类
- `Bytes`：已加载的字节
- `Unloaded`：已卸载的类
- `Bytes`：在Unloaded后面，表示已卸载的字节

### 垃圾回收统计信息相关的选项：-gcutil

该选项提供有关 JVM 垃圾回收统计信息的信息。

示例：

```shell
jstat -gcutil 32988 1s 10
# 虚拟机ID 32988 采样间隔1s 采样数10
```

![image.png](https://note-1251668647.cos.ap-nanjing.myqcloud.com/20240507174155.png)

输出参数说明：
- `S0`：第一个幸存者空间利用率
- `S1`：第二个幸存者空间利用率
- `E`：伊甸园空间利用率
- `O`：老年代空间利用率
- `M`：元空间利用率
- `CCS`：压缩空间利用率
- `YGC`：从应用程序启动到采样时，年轻代垃圾回收次数
- `YGCT`：从应用程序启动到采样时，年轻代垃圾回收所用时间，单位s
- `FGC`：从应用程序启动到采样时，Full GC次数
- `FGCT`：从应用程序启动到采样时，Full GC所用时间，单位s
- `GC`：从应用程序启动到采样时，GC用的总时间，单位s

通过 jstat 命令结合这些输出项，可以实时监控 Java 应用程序的内存使用情况和垃圾回收行为，有助于及时发现和解决性能问题。